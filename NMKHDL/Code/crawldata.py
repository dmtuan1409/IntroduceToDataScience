from time import sleep
import json
from bs4 import BeautifulSoup
from selenium import webdriver
from selenium.webdriver.common.by import By
from helium import *
import pandas as pd

driver = webdriver.Chrome()

#Hàm này lấy tất cả link thành phố
def getLinkCity():
    url = "https://www.agoda.com/vi-vn/country/vietnam.html?cid=1844104"
    driver.get(url)
    sleep(3)
    htmltext = driver.page_source
    soup = BeautifulSoup(htmltext, "html.parser")
    authors = []
    links=soup.find("section",class_="all-states-class")
    link1 = links.findAll("a",href=True)
    for x in link1:
        if x.text:
            link="https://www.agoda.com"+x['href']
            authors.append(link)
    return authors

linkCity = ['https://www.agoda.com/vi-vn/region/ho-chi-minh-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/ha-noi-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/da-nang-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/ba-ria-vung-tau-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/lam-dong-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/khanh-hoa-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/quang-ninh-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/quang-nam-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/kien-giang-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/binh-thuan-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/thua-thien-hue-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/lao-cai-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/hai-phong-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/binh-dinh-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/ninh-binh-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/can-tho-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/phu-yen-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/thanh-hoa-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/quang-binh-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/ha-giang-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/ninh-thuan-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/vinh-phuc-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/dak-lak-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/hoa-binh-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/ha-tinh-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/nghe-an-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/dong-nai-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/son-la-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/an-giang-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/binh-duong-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/quang-ngai-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/gia-lai-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/bac-ninh-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/ben-tre-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/cao-bang-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/tien-giang-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/bac-can-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/dong-thap-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/kon-tum-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/yen-bai-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/hai-duong-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/quang-tri-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/vinh-long-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/thai-nguyen-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/dien-bien-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/tay-ninh-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/lang-son-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/ca-mau-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/bac-lieu-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/tuyen-quang-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/nam-dinh-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/thai-binh-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/dak-nong-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/long-an-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/soc-trang-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/ha-nam-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/bac-giang-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/hung-yen-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/lai-chau-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/hau-giang-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/tra-vinh-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/binh-phuoc-province-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/region/phu-tho-province-vn.html?cid=1844104']

#Hàm này lấy tất cả các quận huyện trong từng thành phố
def getLinkInCity():
    authors = []
    for i in linkCity:
        driver.get(i)
        sleep(3)
        htmltext = driver.page_source
        soup = BeautifulSoup(htmltext, "html.parser")
        links = soup.find("section", class_="neighbor-class")
        try:
            link1 = links.findAll("a", href=True)
            for x in link1:
                if x.text:
                    link = "https://www.agoda.com" + x['href']
                    authors.append(link)
            print("Xong trang "+ str(i))
        except:
            print("Khong co")
            continue
    return authors
link = getLinkInCity()
print(link)
linkTown=['https://www.agoda.com/vi-vn/city/ho-chi-minh-city-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/di-an-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/can-gio-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/hanoi-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/gia-lam-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/xuan-bang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/hoai-duc-phu-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ha-hoi-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/phung-thon-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/dong-sam-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ung-hoa-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/da-nang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/vung-tau-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ba-ria-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ap-phuoc-tinh-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/xa-thang-nhi-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/dalat-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/bao-loc-dalat-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/khu-chi-lang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ap-da-thien-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ap-da-loi-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/trai-mat-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/manline-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/da-deum-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/di-linh-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/duc-trong-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/krela-goul-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/riong-serignac-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/lac-duong-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/nha-trang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/khanh-hoa-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/dai-lanh-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/thon-cat-loi-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ninh-hoa-khanh-hoa-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/cam-pha-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/da-binh-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/van-don-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/huyen-van-don-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/dai-lai-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/hoi-an-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/an-lam-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/dien-ban-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/dong-giang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/dong-luy-tay-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ha-tien-kien-giang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/kien-luong-kien-giang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ba-hon-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/phan-thiet-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/da-breline-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ap-thien-phuoc-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/lang-danh-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ap-cho-dinh-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/hue-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/bou-aie-ha-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/a-luoi-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/sapa-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/lao-cai-city-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/bac-ha-lao-cai-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/lung-thang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/bao-yen-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/nam-hoac-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/haiphong-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/cat-ba-island-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/da-han-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/huyen-hoai-nhon-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ninh-binh-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/can-tho-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/co-do-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/tuy-hoa-phu-yen-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/da-dang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/thanh-hoa-sam-son-beach-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/thanh-hoa-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/thanh-pho-thanh-hoa-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/dong-hoi-quang-binh-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/phong-nha-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/quan-hau-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ha-giang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/yen-minh-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/quan-ba-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/nam-pi-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/hoang-su-phi-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/luong-oai-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/lang-khiem-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/phan-rang-thap-cham-ninh-thuan-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ca-na-beach-ninh-thuan-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/thon-my-nghiep-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/da-hang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/tam-dao-vinh-phuc-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/phuc-yen-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/vinh-yen-vinh-phuc-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/vinh-phuc-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/viet-tri-phu-tho-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/buon-ma-thuot-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/buon-mhang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/buon-buor-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/mai-chau-hoa-binh-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/hoa-binh-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/huyen-luong-son-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/da-tham-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ban-suoi-hoi-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ban-ngoa-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/suoi-rem-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ban-bang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/bai-man-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/van-giang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ha-tinh-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/con-cuong-nghe-an-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/bien-hoa-dong-nai-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/nam-cat-tien-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/huyen-long-khanh-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/quan-tom-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ap-nguyen-thai-hoc-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ap-suoi-cat-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/long-thanh-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/xa-trang-bom-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/son-la-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/chau-doc-an-giang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/long-xuyen-an-giang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/tinh-bien-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/an-phu-an-giang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/phum-banteai-dek-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/binh-duong-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/thu-n-an-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/thu-dau-mot-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/xom-bung-dia-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/quang-ngai-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/thon-co-luy-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/pleiku-gia-lai-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/huyen-mang-yang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/bac-ninh-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/tu-son-bac-ninh-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ben-tre-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/cho-lach-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/cao-bang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/lung-miau-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/pac-xin-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/my-tho-tien-giang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/cai-be-tien-giang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/cai-lay-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/long-an-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ap-phu-an-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/go-cong-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ba-be-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/bac-kan-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/cao-lanh-dong-thap-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/sa-dec-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ap-thap-muoi-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/hong-ngu-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/kon-tum-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/kon-von-kle-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/kon-robang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/dak-ben-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/yen-binh-yen-bai-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/poum-ban-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ban-coc-lua-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/da-cay-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/da-chang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/hai-duong-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/da-coc-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/thanh-thu-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/dong-ha-quang-tri-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/khe-sanh-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/huyen-gio-linh-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/lao-bao-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/vinh-long-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/thai-nguyen-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/thon-nui-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/tay-ninh-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/lang-son-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/lang-dang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ca-mau-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/bac-lieu-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/tuyen-quang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/nam-dinh-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/nhu-thuc-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/thai-binh-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/da-cat-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ap-binh-thi-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/tan-an-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ben-luc-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/soc-trang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/phu-ly-ha-nam-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/bac-giang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ban-yen-nhan-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/chau-thanh-a-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/ap-nhon-loc-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/tra-vinh-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/cau-ke-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/nguyet-hang-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/phuoc-long-binh-phuoc-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/dong-xoai-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/bu-gia-map-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/phu-tho-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/van-lung-vn.html?cid=1844104', 'https://www.agoda.com/vi-vn/city/la-phu-vn.html?cid=1844104']

#Hàm này lấy link quận huyện của các thành phố sau khi bấm vào xem tất cả khách sạn của quận huyện đó
def strs(x):
    return str(x)
def getPagelist():
    authors=[]
    for i in linkTown:
        driver.get(i)
        sleep(3)
        htmltext = driver.page_source
        soup = BeautifulSoup(htmltext, "html.parser")
        list = soup.findAll("script")
        list=strs(list)
        url1 = "https://www.agoda.com/vi-vn/search?"
        index = list.find(url1)
        link = ""
        for j in range(index, index + 100):
            if list[j] == '"':
                break
            else:
                link = link + list[j]
        authors.append(link)
        print("xong cua "+i+" la: "+strs(link))
        sleep(3)
    return authors

link = getPagelist()
print(link)

dsachTP=['https://www.agoda.com/vi-vn/search?city=13170&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=221357&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=88775&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=2758&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=115695&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=234333&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=222717&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=222377&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=228720&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=221815&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=232720&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=16440&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=17190&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=216927&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=216371&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=233219&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=15932&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=218905&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=223982&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=215718&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=215714&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=232259&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=226346&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=220864&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=221359&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=221974&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=224558&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=229784&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=224677&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=2679&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=115652&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=220971&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=231195&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=728008&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=219949&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=220855&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=232764&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=223444&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=220969&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=16552&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=215303&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=221396&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=221674&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=221745&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=21673&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=224114&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=216898&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=16264&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=220856&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=216625&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=224934&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=215683&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=3738&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=219320&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=215197&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=17160&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=106068&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=18865&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=226104&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=218925&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=227145&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=17161&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=17243&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=220870&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=223174&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=17245&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=16079&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=220514&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=78908&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=220863&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=105661&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=115756&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=230898&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=18866&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=228387&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=719776&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=204060&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=234568&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=229505&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=227246&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=222761&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=226146&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=225104&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=21557&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=669620&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=231375&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=220871&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=230398&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=115740&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=115735&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=232995&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=204066&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=19603&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=219731&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=219537&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=226263&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=18044&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=223237&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=220906&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=218499&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=218121&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=230218&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=217097&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=217051&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=232772&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=230985&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=728010&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=105991&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=702291&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=223230&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=229586&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=216211&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=216465&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=669642&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=233232&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=204068&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=17162&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=115622&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=231976&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=728002&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=228632&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=115678&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=718883&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=231650&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=233407&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=106067&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=231205&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=78906&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=223243&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=115625&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=720973&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=204056&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=220366&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=204057&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=226062&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=228115&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=214967&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=219881&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=219886&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=225825&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=216281&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=737290&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=720974&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=204054&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=204059&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=229817&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=216614&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=222832&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=204063&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=224382&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=224345&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=221016&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=728014&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=229464&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=217290&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=220859&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=220860&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=115635&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=220862&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=230916&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=204067&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=223849&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=223145&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=225574&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=115734&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=115754&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=231414&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=115751&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=204064&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=224933&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=115629&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=204055&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=204071&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=204065&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=227720&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=115753&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=220858&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=115657&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=115663&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=115661&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=115748&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=204061&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=204053&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=218832&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=728007&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=216225&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=204070&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=220109&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=227612&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=728005&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=221899&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=214897&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=215124&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=232804&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh', 'https://www.agoda.com/vi-vn/search?city=224649&checkIn= 2020-11-15&los=1&rooms=1&adults=2&children=0&sort=priceLowToHigh']
def getLinkHotel():
    authors = []
    for i in dsachTP:
        print("Đang ở trong thành phố "+i)
        a=0
        page=1
        driver.get(i)
        sleep(5)
        while a==0:
            print("Đang ở trang số: "+strs(page))
            click(Point(0, 0))
            sleep(2)
            last_height = driver.execute_script("return document.body.scrollHeight")
            while True:
                # Scroll down to the bottom.
                driver.execute_script("window.scrollTo(0, document.body.scrollHeight);")
                # Wait to load the page
                sleep(2)
                # Calculate new scroll height and compare with last height.
                new_height = driver.execute_script("return document.body.scrollHeight")
                if new_height == last_height:
                    break
                last_height = new_height
                sleep(2)
            sleep(30)
            htmltext = driver.page_source
            soup = BeautifulSoup(htmltext, "html.parser")
            links = soup.findAll("a", class_="PropertyCard__Link")
            for x in links:
                try:
                    link = "https://www.agoda.com" + x['href']
                    authors.append(link)
                    print(link)
                except:
                    print("Không có thẻ href")
            print("Có tát cả " + strs(len(links)) + " khách sạn")
            try:
                driver.find_element_by_id('paginationNext').click()
                page=page+1
            except:
                print("Hết trang, sang khu vực kế tiếp")
                a=1
        sleep(2)
    return authors

hotel = getLinkHotel()
print("Tất cả hotel: ")
print(hotel)
print(len(hotel))
hotel = pd.DataFrame(hotel)
hotel.to_csv("../Data/hotel.csv",index=False)
